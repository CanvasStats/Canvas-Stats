<app-header [selectedYear]="year" [showSearch]="true" />
@if(!finishedDrawing) {
<div class="popup-container">
    <div class="popup">
        <app-loading />
    </div>
</div>


}
@if (errorMessage) {
<div class="error rose clickable" (click)="sendUserToStats()">{{errorMessage}}</div>
}
@if (!errorMessage) {
<main>
    <div id="main-canvas">
        <section id="space-between-wrapper">
            @if (drawParams.key === 'username') {
                <button class="btn blue" (click)="sendUserToStats()"><span class="material-symbols-outlined">
                    arrow_back
                </span> Back to your {{year}} stats</button>
            }
            @else {
                <a class="btn blue" routerLink=""><span class="material-symbols-outlined">
                    arrow_back
                </span> Back</a>
            }
            <button (click)="downloadImage()" class="btn mauve">Download {{filename}}</button>
        </section>
        <article class="left">
            <section>
                <p class="text">
                    {{message}}
                </p>
            </section>
        </article>
        <canvas #pixelCanvas id="myCanvas" [height]="canvasHeight" [width]="canvasWidth"></canvas>
        <article class="left">
            <section>
                <p class="text">If you would like an image created such as the top 100 users, the canvas in reversed order, all
                    pixels from an
                    instance, all pixels within an area, or really any other combination of pixels you can think of,
                    just message <a href="https://sh.itjust.works/u/the_real_monte">&#64;the_real_monte</a>
                    and we'll send you an image of your request.</p>
            </section>
        </article>

    </div>
</main>
}

<app-footer />